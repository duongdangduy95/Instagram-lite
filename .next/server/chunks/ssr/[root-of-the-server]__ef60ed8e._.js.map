{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/Instagram-lite/lib/formatTimeAgo.ts"],"sourcesContent":["import { formatDistanceToNow } from 'date-fns'\r\nimport { vi } from 'date-fns/locale'\r\n\r\nexport function formatTimeAgo(date: Date | string) {\r\n  return formatDistanceToNow(new Date(date), { addSuffix: true, locale: vi })\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,cAAc,IAAmB;IAC/C,OAAO,IAAA,yMAAmB,EAAC,IAAI,KAAK,OAAO;QAAE,WAAW;QAAM,QAAQ,iLAAE;IAAC;AAC3E","debugId":null}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/Instagram-lite/app/components/LikeButton.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\n\r\ninterface LikeButtonProps {\r\n  blogId: string\r\n  initialLiked?: boolean\r\n  initialCount?: number\r\n  userId?: string | null\r\n  onLikeChange?: (newCount: number) => void\r\n  onRefetch?: () => void\r\n}\r\n\r\nexport default function LikeButton({ \r\n  blogId, \r\n  initialLiked = false, \r\n  initialCount = 0,\r\n  userId,\r\n  onLikeChange,\r\n  onRefetch\r\n}: LikeButtonProps) {\r\n  const router = useRouter()\r\n  const [liked, setLiked] = useState(initialLiked)\r\n  const [likeCount, setLikeCount] = useState(initialCount)\r\n  const [loading, setLoading] = useState(false)\r\n  const [authenticated, setAuthenticated] = useState<boolean | null>(null)\r\n\r\n  // ‚úÖ Ki·ªÉm tra session b·∫±ng c√°ch g·ªçi API /api/me\r\n  useEffect(() => {\r\n    const checkSession = async () => {\r\n      try {\r\n        const res = await fetch('/api/me', {\r\n          method: 'GET',\r\n          credentials: 'include',\r\n        })\r\n\r\n        if (!res.ok) {\r\n          setAuthenticated(false)\r\n          return\r\n        }\r\n\r\n        const data = await res.json()\r\n        setAuthenticated(true)\r\n      } catch (err) {\r\n        setAuthenticated(false)\r\n      }\r\n    }\r\n\r\n    checkSession()\r\n  }, [])\r\n\r\n  const handleLike = async () => {\r\n    if (authenticated === null) {\r\n      return\r\n    }\r\n\r\n    if (!authenticated) {\r\n      router.push('/login')\r\n      return\r\n    }\r\n\r\n    setLoading(true)\r\n\r\n    try {\r\n      const response = await fetch(`/api/blog/${blogId}/like`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        credentials: 'include',\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.text()\r\n        throw new Error(`HTTP ${response.status}: ${errorData}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      setLiked(data.liked)\r\n      const newCount = data.liked ? likeCount + 1 : likeCount - 1\r\n      setLikeCount(newCount)\r\n      \r\n      // G·ªçi callback ƒë·ªÉ update parent component\r\n      if (onLikeChange) {\r\n        onLikeChange(newCount)\r\n      }\r\n\r\n      // Refetch data ƒë·ªÉ sync v·ªõi server\r\n      if (onRefetch) {\r\n        setTimeout(onRefetch, 100)\r\n      }\r\n    } catch (error) {\r\n      if (error instanceof Error && error.message.includes('401')) {\r\n        router.push('/login')\r\n      }\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <button\r\n      onClick={handleLike}\r\n      disabled={loading || authenticated === null}\r\n      className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors flex-1 justify-center ${\r\n        loading || authenticated === null\r\n          ? 'opacity-50 cursor-not-allowed'\r\n          : 'hover:bg-gray-100'\r\n      }`}\r\n    >\r\n      <span className={liked ? 'text-blue-500' : 'text-gray-600'}>\r\n        üëç\r\n      </span>\r\n      <span className={`font-medium ${liked ? 'text-blue-600' : 'text-gray-600'}`}>\r\n        {loading ? 'ƒêang x·ª≠ l√Ω...' : liked ? 'ƒê√£ th√≠ch' : 'Th√≠ch'}\r\n      </span>\r\n      {likeCount > 0 && (\r\n        <span className=\"text-sm text-gray-500\">({likeCount})</span>\r\n      )}\r\n    </button>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAce,SAAS,WAAW,EACjC,MAAM,EACN,eAAe,KAAK,EACpB,eAAe,CAAC,EAChB,MAAM,EACN,YAAY,EACZ,SAAS,EACO;IAChB,MAAM,SAAS,IAAA,+KAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iPAAQ,EAAC;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iPAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iPAAQ,EAAC;IACvC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iPAAQ,EAAiB;IAEnE,+CAA+C;IAC/C,IAAA,kPAAS,EAAC;QACR,MAAM,eAAe;YACnB,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,WAAW;oBACjC,QAAQ;oBACR,aAAa;gBACf;gBAEA,IAAI,CAAC,IAAI,EAAE,EAAE;oBACX,iBAAiB;oBACjB;gBACF;gBAEA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,iBAAiB;YACnB,EAAE,OAAO,KAAK;gBACZ,iBAAiB;YACnB;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,aAAa;QACjB,IAAI,kBAAkB,MAAM;YAC1B;QACF;QAEA,IAAI,CAAC,eAAe;YAClB,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,WAAW;QAEX,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,CAAC,UAAU,EAAE,OAAO,KAAK,CAAC,EAAE;gBACvD,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,aAAa;YACf;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE,SAAS,MAAM,CAAC,EAAE,EAAE,WAAW;YACzD;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,SAAS,KAAK,KAAK;YACnB,MAAM,WAAW,KAAK,KAAK,GAAG,YAAY,IAAI,YAAY;YAC1D,aAAa;YAEb,0CAA0C;YAC1C,IAAI,cAAc;gBAChB,aAAa;YACf;YAEA,kCAAkC;YAClC,IAAI,WAAW;gBACb,WAAW,WAAW;YACxB;QACF,EAAE,OAAO,OAAO;YACd,IAAI,iBAAiB,SAAS,MAAM,OAAO,CAAC,QAAQ,CAAC,QAAQ;gBAC3D,OAAO,IAAI,CAAC;YACd;QACF,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8QAAC;QACC,SAAS;QACT,UAAU,WAAW,kBAAkB;QACvC,WAAW,CAAC,yFAAyF,EACnG,WAAW,kBAAkB,OACzB,kCACA,qBACJ;;0BAEF,8QAAC;gBAAK,WAAW,QAAQ,kBAAkB;0BAAiB;;;;;;0BAG5D,8QAAC;gBAAK,WAAW,CAAC,YAAY,EAAE,QAAQ,kBAAkB,iBAAiB;0BACxE,UAAU,kBAAkB,QAAQ,aAAa;;;;;;YAEnD,YAAY,mBACX,8QAAC;gBAAK,WAAU;;oBAAwB;oBAAE;oBAAU;;;;;;;;;;;;;AAI5D","debugId":null}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/Instagram-lite/app/components/CommentSection.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\ninterface Comment {\r\n  id: string;\r\n  content: string;\r\n  createdAt: string;\r\n  parentId: string | null;\r\n  author: {\r\n    fullname: string;\r\n    username: string;\r\n  };\r\n  replies: Comment[];\r\n}\r\n\r\ninterface Props {\r\n  blogId: string;\r\n  currentUser: {\r\n    id: string;\r\n    fullname: string;\r\n    username: string;\r\n  } | null;\r\n}\r\n\r\nfunction buildCommentTree(comments: Omit<Comment, 'replies'>[]): Comment[] {\r\n  const map = new Map<string, Comment>();\r\n  const roots: Comment[] = [];\r\n\r\n  comments.forEach((comment) => {\r\n    map.set(comment.id, { ...comment, replies: [] });\r\n  });\r\n\r\n  map.forEach((comment) => {\r\n    if (comment.parentId) {\r\n      const parent = map.get(comment.parentId);\r\n      parent?.replies.push(comment);\r\n    } else {\r\n      roots.push(comment);\r\n    }\r\n  });\r\n\r\n  return roots;\r\n}\r\n\r\nexport default function CommentSection({ blogId, currentUser }: Props) {\r\n  const [comments, setComments] = useState<Comment[]>([]);\r\n  const [newComment, setNewComment] = useState('');\r\n  const [replyTo, setReplyTo] = useState<string | null>(null);\r\n  const [showSidebar, setShowSidebar] = useState(false);\r\n\r\n  useEffect(() => {\r\n    axios.get(`/api/blog/${blogId}/comment`).then((res) => {\r\n      const tree = buildCommentTree(res.data);\r\n      setComments(tree);\r\n    });\r\n  }, [blogId]);\r\n  \r\n  async function handleSubmit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    if (!newComment.trim()) return;\r\n\r\n    await axios.post(`/api/blog/${blogId}/comment`, {\r\n      content: newComment,\r\n      parentId: replyTo,\r\n    });\r\n\r\n    setNewComment('');\r\n    setReplyTo(null);\r\n\r\n    const res = await axios.get(`/api/blog/${blogId}/comment`);\r\n    setComments(buildCommentTree(res.data));\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Toggle button */}\r\n      <button\r\n        onClick={() => setShowSidebar(true)}\r\n        className=\"text-sm text-blue-600 underline mt-2\"\r\n      >\r\n        Hi·ªÉn th·ªã {comments.length} b√¨nh lu·∫≠n\r\n      </button>\r\n\r\n      {/* Sidebar */}\r\n      <div\r\n        className={`fixed top-0 right-0 h-full w-full max-w-sm bg-white shadow-lg border-l z-50 transform transition-transform duration-300 ${\r\n          showSidebar ? 'translate-x-0' : 'translate-x-full'\r\n        }`}\r\n      >\r\n        <div className=\"flex justify-between items-center p-4 border-b bg-gray-50\">\r\n          <h2 className=\"text-lg font-semibold\">B√¨nh lu·∫≠n</h2>\r\n          <button\r\n            onClick={() => setShowSidebar(false)}\r\n            className=\"text-red-500 text-sm\"\r\n          >\r\n            ƒê√≥ng\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-4 overflow-y-auto h-[calc(100%-64px)]\">\r\n          {currentUser && (\r\n            <form onSubmit={handleSubmit} className=\"mb-4\">\r\n              {replyTo && (\r\n                <div className=\"text-sm text-blue-500 mb-1\">\r\n                  Tr·∫£ l·ªùi m·ªôt b√¨nh lu·∫≠n.{' '}\r\n                  <button\r\n                    onClick={() => setReplyTo(null)}\r\n                    type=\"button\"\r\n                    className=\"text-red-500 underline ml-2\"\r\n                  >\r\n                    Hu·ª∑\r\n                  </button>\r\n                </div>\r\n              )}\r\n              <textarea\r\n                value={newComment}\r\n                onChange={(e) => setNewComment(e.target.value)}\r\n                rows={2}\r\n                placeholder=\"Vi·∫øt b√¨nh lu·∫≠n...\"\r\n                className=\"w-full border rounded p-2 focus:outline-none focus:ring\"\r\n              />\r\n              <button\r\n                type=\"submit\"\r\n                className=\"mt-2 px-4 py-1 bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n              >\r\n                G·ª≠i\r\n              </button>\r\n            </form>\r\n          )}\r\n\r\n          <div className=\"space-y-3\">\r\n            {comments.map((comment) => (\r\n              <CommentItem\r\n                key={comment.id}\r\n                comment={comment}\r\n                currentUser={currentUser}\r\n                onReply={setReplyTo}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\ninterface CommentItemProps {\r\n  comment: Comment;\r\n  currentUser: Props['currentUser'];\r\n  onReply: (id: string) => void;\r\n}\r\n\r\nfunction CommentItem({ comment, currentUser, onReply }: CommentItemProps) {\r\n  return (\r\n    <div className=\"ml-2 mt-2\">\r\n      <div className=\"p-2 bg-gray-100 rounded-lg border border-gray-200\">\r\n        <p className=\"text-sm font-medium text-gray-800\">\r\n          {comment.author.fullname}{' '}\r\n          <span className=\"text-gray-500 text-xs\">\r\n            {new Date(comment.createdAt).toLocaleString()}\r\n          </span>\r\n        </p>\r\n        <p className=\"text-sm text-gray-700\">{comment.content}</p>\r\n        {currentUser && (\r\n          <button\r\n            onClick={() => onReply(comment.id)}\r\n            className=\"text-xs text-blue-500 hover:underline mt-1\"\r\n          >\r\n            Tr·∫£ l·ªùi\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Replies */}\r\n      {comment.replies.length > 0 && (\r\n        <div className=\"ml-4 border-l pl-2 mt-2\">\r\n          {comment.replies.map((reply) => (\r\n            <CommentItem\r\n              key={reply.id}\r\n              comment={reply}\r\n              currentUser={currentUser}\r\n              onReply={onReply}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 506, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/Instagram-lite/app/components/CommentToggle.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport CommentSection from './CommentSection';\r\n\r\ntype Props = {\r\n  blogId: string;\r\n  currentUser: {\r\n    id: string;\r\n    fullname: string;\r\n    username: string;\r\n  } | null;\r\n};\r\n\r\nexport default function CommentToggle({ blogId, currentUser }: Props) {\r\n  const [showComments, setShowComments] = useState(false);\r\n\r\n  return (\r\n    <div>\r\n      <button\r\n        onClick={() => setShowComments(!showComments)}\r\n        className=\"flex items-center space-x-2 px-4 py-2 hover:bg-gray-50 rounded-lg flex-1 justify-center transition-colors w-full\"\r\n      >\r\n        <span className=\"text-gray-600\">üí¨</span>\r\n        <span className=\"text-gray-600 font-medium\">B√¨nh lu·∫≠n</span>\r\n      </button>\r\n\r\n      {showComments && (\r\n        <div className=\"mt-2\">\r\n          <CommentSection blogId={blogId} currentUser={currentUser} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAce,SAAS,cAAc,EAAE,MAAM,EAAE,WAAW,EAAS;IAClE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iPAAQ,EAAC;IAEjD,qBACE,8QAAC;;0BACC,8QAAC;gBACC,SAAS,IAAM,gBAAgB,CAAC;gBAChC,WAAU;;kCAEV,8QAAC;wBAAK,WAAU;kCAAgB;;;;;;kCAChC,8QAAC;wBAAK,WAAU;kCAA4B;;;;;;;;;;;;YAG7C,8BACC,8QAAC;gBAAI,WAAU;0BACb,cAAA,8QAAC,+KAAc;oBAAC,QAAQ;oBAAQ,aAAa;;;;;;;;;;;;;;;;;AAKvD","debugId":null}},
    {"offset": {"line": 573, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/Instagram-lite/app/components/Navigation.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Link from 'next/link'\r\nimport { useSession, signOut } from 'next-auth/react'\r\nimport { useState } from 'react'\r\n\r\nexport default function Navigation() {\r\n  const { data: session } = useSession()\r\n  const [showMenu, setShowMenu] = useState(false)\r\n\r\n  return (\r\n    <nav className=\"bg-white shadow-sm border-b sticky top-0 z-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 py-3\">\r\n        <div className=\"flex items-center justify-between\">\r\n          {/* Logo */}\r\n          <Link href=\"/\" className=\"text-2xl font-bold text-blue-600 hover:text-blue-700\">\r\n            InstaClone\r\n          </Link>\r\n\r\n          {/* Desktop Menu */}\r\n          <div className=\"hidden md:flex items-center space-x-6\">\r\n            <Link\r\n              href=\"/home\"\r\n              className=\"flex items-center space-x-2 text-gray-700 hover:text-blue-600 transition-colors\"\r\n            >\r\n              <span className=\"text-xl\">üè†</span>\r\n              <span>Trang ch·ªß</span>\r\n            </Link>\r\n\r\n            <Link\r\n              href=\"/search\"\r\n              className=\"flex items-center space-x-2 text-gray-700 hover:text-blue-600 transition-colors\"\r\n            >\r\n              <span className=\"text-xl\">üîç</span>\r\n              <span>T√¨m ki·∫øm</span>\r\n            </Link>\r\n\r\n            <Link\r\n              href=\"/blog/create\"\r\n              className=\"flex items-center space-x-2 text-gray-700 hover:text-blue-600 transition-colors\"\r\n            >\r\n              <span className=\"text-xl\">‚ûï</span>\r\n              <span>T·∫°o b√†i</span>\r\n            </Link>\r\n\r\n            <Link\r\n              href=\"/profile\"\r\n              className=\"flex items-center space-x-2 text-gray-700 hover:text-blue-600 transition-colors\"\r\n            >\r\n              <span className=\"text-xl\">üë§</span>\r\n              <span>Trang c√° nh√¢n</span>\r\n            </Link>\r\n\r\n            {session && (\r\n              <button\r\n                onClick={() => signOut({ redirect: true, callbackUrl: '/login' })}\r\n                className=\"flex items-center space-x-2 text-gray-700 hover:text-red-600 transition-colors\"\r\n              >\r\n                <span className=\"text-xl\">üö™</span>\r\n                <span>ƒêƒÉng xu·∫•t</span>\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Mobile Menu Button */}\r\n          <button\r\n            onClick={() => setShowMenu(!showMenu)}\r\n            className=\"md:hidden text-2xl focus:outline-none\"\r\n          >\r\n            ‚ò∞\r\n          </button>\r\n        </div>\r\n\r\n        {/* Mobile Menu */}\r\n        {showMenu && (\r\n          <div className=\"md:hidden mt-4 pb-4 space-y-3 border-t pt-4\">\r\n            <Link\r\n              href=\"/home\"\r\n              className=\"block px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors\"\r\n              onClick={() => setShowMenu(false)}\r\n            >\r\n              üè† Trang ch·ªß\r\n            </Link>\r\n\r\n            <Link\r\n              href=\"/search\"\r\n              className=\"block px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors\"\r\n              onClick={() => setShowMenu(false)}\r\n            >\r\n              üîç T√¨m ki·∫øm\r\n            </Link>\r\n\r\n            <Link\r\n              href=\"/blog/create\"\r\n              className=\"block px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors\"\r\n              onClick={() => setShowMenu(false)}\r\n            >\r\n              ‚ûï T·∫°o b√†i\r\n            </Link>\r\n\r\n            <Link\r\n              href=\"/profile\"\r\n              className=\"block px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors\"\r\n              onClick={() => setShowMenu(false)}\r\n            >\r\n              üë§ Trang c√° nh√¢n\r\n            </Link>\r\n\r\n            {session && (\r\n              <button\r\n                onClick={() => {\r\n                  signOut({ redirect: true, callbackUrl: '/login' })\r\n                  setShowMenu(false)\r\n                }}\r\n                className=\"block w-full text-left px-4 py-2 text-gray-700 hover:bg-red-50 rounded-lg transition-colors\"\r\n              >\r\n                üö™ ƒêƒÉng xu·∫•t\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,4LAAU;IACpC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iPAAQ,EAAC;IAEzC,qBACE,8QAAC;QAAI,WAAU;kBACb,cAAA,8QAAC;YAAI,WAAU;;8BACb,8QAAC;oBAAI,WAAU;;sCAEb,8QAAC,uMAAI;4BAAC,MAAK;4BAAI,WAAU;sCAAuD;;;;;;sCAKhF,8QAAC;4BAAI,WAAU;;8CACb,8QAAC,uMAAI;oCACH,MAAK;oCACL,WAAU;;sDAEV,8QAAC;4CAAK,WAAU;sDAAU;;;;;;sDAC1B,8QAAC;sDAAK;;;;;;;;;;;;8CAGR,8QAAC,uMAAI;oCACH,MAAK;oCACL,WAAU;;sDAEV,8QAAC;4CAAK,WAAU;sDAAU;;;;;;sDAC1B,8QAAC;sDAAK;;;;;;;;;;;;8CAGR,8QAAC,uMAAI;oCACH,MAAK;oCACL,WAAU;;sDAEV,8QAAC;4CAAK,WAAU;sDAAU;;;;;;sDAC1B,8QAAC;sDAAK;;;;;;;;;;;;8CAGR,8QAAC,uMAAI;oCACH,MAAK;oCACL,WAAU;;sDAEV,8QAAC;4CAAK,WAAU;sDAAU;;;;;;sDAC1B,8QAAC;sDAAK;;;;;;;;;;;;gCAGP,yBACC,8QAAC;oCACC,SAAS,IAAM,IAAA,yLAAO,EAAC;4CAAE,UAAU;4CAAM,aAAa;wCAAS;oCAC/D,WAAU;;sDAEV,8QAAC;4CAAK,WAAU;sDAAU;;;;;;sDAC1B,8QAAC;sDAAK;;;;;;;;;;;;;;;;;;sCAMZ,8QAAC;4BACC,SAAS,IAAM,YAAY,CAAC;4BAC5B,WAAU;sCACX;;;;;;;;;;;;gBAMF,0BACC,8QAAC;oBAAI,WAAU;;sCACb,8QAAC,uMAAI;4BACH,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,YAAY;sCAC5B;;;;;;sCAID,8QAAC,uMAAI;4BACH,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,YAAY;sCAC5B;;;;;;sCAID,8QAAC,uMAAI;4BACH,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,YAAY;sCAC5B;;;;;;sCAID,8QAAC,uMAAI;4BACH,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,YAAY;sCAC5B;;;;;;wBAIA,yBACC,8QAAC;4BACC,SAAS;gCACP,IAAA,yLAAO,EAAC;oCAAE,UAAU;oCAAM,aAAa;gCAAS;gCAChD,YAAY;4BACd;4BACA,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AASf","debugId":null}},
    {"offset": {"line": 838, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/Instagram-lite/app/home/client.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport Link from 'next/link'\r\nimport { formatTimeAgo } from '@/lib/formatTimeAgo'\r\nimport LikeButton from '@/app/components/LikeButton'\r\nimport CommentToggle from '../components/CommentToggle'\r\nimport Navigation from '../components/Navigation'\r\n\r\ninterface Blog {\r\n  id: string\r\n  caption: string\r\n  imageUrl: string\r\n  createdAt: string\r\n  author: {\r\n    id: string\r\n    fullname: string\r\n  }\r\n  _count: {\r\n    likes: number\r\n    comments: number\r\n  }\r\n}\r\n\r\nexport default function HomePageClient() {\r\n  const [blogs, setBlogs] = useState<Blog[]>([])\r\n  const [currentUser, setCurrentUser] = useState<any>(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const [userRes, blogsRes] = await Promise.all([\r\n        fetch('/api/me', { credentials: 'include' }),\r\n        fetch('/api/blog', { credentials: 'include' })\r\n      ])\r\n\r\n      if (userRes.ok) {\r\n        const userData = await userRes.json()\r\n        setCurrentUser(userData)\r\n      }\r\n\r\n      if (blogsRes.ok) {\r\n        const blogsData = await blogsRes.json()\r\n        setBlogs(blogsData)\r\n      }\r\n    } catch (error) {\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData()\r\n  }, [])\r\n\r\n  // Refetch data when page regains focus\r\n  useEffect(() => {\r\n    const handleFocus = () => {\r\n      fetchData()\r\n    }\r\n\r\n    window.addEventListener('focus', handleFocus)\r\n    return () => window.removeEventListener('focus', handleFocus)\r\n  }, [])\r\n\r\n  // Polling m·ªói 10 gi√¢y\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      fetchData()\r\n    }, 10000)\r\n\r\n    return () => clearInterval(interval)\r\n  }, [])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-100\">\r\n        <Navigation />\r\n        <main className=\"max-w-2xl mx-auto p-4 pt-6\">\r\n          <div className=\"text-center\">Loading...</div>\r\n        </main>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100\">\r\n      <Navigation />\r\n\r\n      <main className=\"max-w-2xl mx-auto p-4 pt-6\">\r\n        <h1 className=\"text-2xl font-bold mb-6 text-gray-800\">News Feed</h1>\r\n\r\n        <div className=\"space-y-4\">\r\n          {blogs.map((blog) => {\r\n            if (!blog?.id || !blog?.author) return null\r\n\r\n            const isCurrentUser = blog.author.id === currentUser?.id\r\n            const profileLink = isCurrentUser\r\n              ? '/profile'\r\n              : `/profile/${blog.author.id}`\r\n\r\n            return (\r\n              <div\r\n                key={blog.id}\r\n                className=\"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow overflow-hidden\"\r\n              >\r\n                {/* Header */}\r\n                <div className=\"px-4 py-3 border-b border-gray-100\">\r\n                  <Link href={profileLink}>\r\n                    <div className=\"flex items-center space-x-3 hover:opacity-80 transition-opacity\">\r\n                      <div className=\"w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                        <span className=\"text-white font-bold text-lg\">\r\n                          {blog.author.fullname.charAt(0).toUpperCase()}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <p className=\"font-semibold text-gray-900 text-sm hover:underline\">\r\n                          {blog.author.fullname}\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-500\">\r\n                          {formatTimeAgo(new Date(blog.createdAt))}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </Link>\r\n                </div>\r\n\r\n                {/* Image */}\r\n                {blog.imageUrl && (\r\n                  <Link href={`/blog/${blog.id}`}>\r\n                    <div className=\"relative w-full bg-gray-200 cursor-pointer group overflow-hidden max-h-96\">\r\n                      <img\r\n                        src={blog.imageUrl}\r\n                        alt={blog.caption}\r\n                        className=\"w-full h-auto object-contain group-hover:scale-105 transition-transform duration-300\"\r\n                      />\r\n                    </div>\r\n                  </Link>\r\n                )}\r\n\r\n                {/* Caption */}\r\n                <div className=\"px-4 py-3\">\r\n                  <p className=\"text-gray-900 text-sm leading-relaxed line-clamp-3\">{blog.caption}</p>\r\n                </div>\r\n\r\n                {/* Likes & Comments Count */}\r\n                <div className=\"px-4 py-2 border-t border-gray-100 text-xs text-gray-600 flex justify-between\">\r\n                  <span>üëç <span className=\"font-medium\">{blog._count.likes}</span> l∆∞·ª£t th√≠ch</span>\r\n                  <span>üí¨ <span className=\"font-medium\">{blog._count.comments}</span> b√¨nh lu·∫≠n</span>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"px-4 py-3 border-t border-gray-100 flex items-center justify-between gap-2\">\r\n                  <div className=\"flex-1\">\r\n                    <LikeButton\r\n                      blogId={blog.id}\r\n                      initialCount={blog._count.likes}\r\n                      userId={currentUser?.id}\r\n                      onLikeChange={(newCount) => {\r\n                        setBlogs(blogs.map(b =>\r\n                          b.id === blog.id\r\n                            ? { ...b, _count: { ...b._count, likes: newCount } }\r\n                            : b\r\n                        ))\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <CommentToggle blogId={blog.id} />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}