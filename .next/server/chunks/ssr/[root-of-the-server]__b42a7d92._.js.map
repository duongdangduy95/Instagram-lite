{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Documents/IT4409/Instagram-lite/app/components/Navigation.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Link from 'next/link'\r\nimport { useSession, signOut } from 'next-auth/react'\r\nimport { useState } from 'react'\r\n\r\nexport default function Navigation() {\r\n  const { data: session } = useSession()\r\n  const [showMenu, setShowMenu] = useState(false)\r\n\r\n  return (\r\n    <nav className=\"bg-white shadow-sm border-b sticky top-0 z-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 py-3\">\r\n        <div className=\"flex items-center justify-between\">\r\n          {/* Logo */}\r\n          <Link href=\"/\" className=\"text-2xl font-bold text-blue-600 hover:text-blue-700\">\r\n            InstaClone\r\n          </Link>\r\n\r\n          {/* Desktop Menu */}\r\n          <div className=\"hidden md:flex items-center space-x-6\">\r\n            <Link\r\n              href=\"/home\"\r\n              className=\"flex items-center space-x-2 text-gray-700 hover:text-blue-600 transition-colors\"\r\n            >\r\n              <span className=\"text-xl\">üè†</span>\r\n              <span>Trang ch·ªß</span>\r\n            </Link>\r\n\r\n            <Link\r\n              href=\"/search\"\r\n              className=\"flex items-center space-x-2 text-gray-700 hover:text-blue-600 transition-colors\"\r\n            >\r\n              <span className=\"text-xl\">üîç</span>\r\n              <span>T√¨m ki·∫øm</span>\r\n            </Link>\r\n\r\n            <Link\r\n              href=\"/blog/create\"\r\n              className=\"flex items-center space-x-2 text-gray-700 hover:text-blue-600 transition-colors\"\r\n            >\r\n              <span className=\"text-xl\">‚ûï</span>\r\n              <span>T·∫°o b√†i</span>\r\n            </Link>\r\n\r\n            <Link\r\n              href=\"/profile\"\r\n              className=\"flex items-center space-x-2 text-gray-700 hover:text-blue-600 transition-colors\"\r\n            >\r\n              <span className=\"text-xl\">üë§</span>\r\n              <span>Trang c√° nh√¢n</span>\r\n            </Link>\r\n\r\n            <button\r\n              onClick={() => signOut({ redirect: true, callbackUrl: '/login' })}\r\n              className=\"flex items-center space-x-2 text-gray-700 hover:text-red-600 transition-colors\"\r\n            >\r\n              <span className=\"text-xl\">üö™</span>\r\n              <span>ƒêƒÉng xu·∫•t</span>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Mobile Menu Button */}\r\n          <button\r\n            onClick={() => setShowMenu(!showMenu)}\r\n            className=\"md:hidden text-2xl focus:outline-none\"\r\n          >\r\n            ‚ò∞\r\n          </button>\r\n        </div>\r\n\r\n        {/* Mobile Menu */}\r\n        {showMenu && (\r\n          <div className=\"md:hidden mt-4 pb-4 space-y-3 border-t pt-4\">\r\n            <Link\r\n              href=\"/home\"\r\n              className=\"block px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors\"\r\n              onClick={() => setShowMenu(false)}\r\n            >\r\n              üè† Trang ch·ªß\r\n            </Link>\r\n\r\n            <Link\r\n              href=\"/search\"\r\n              className=\"block px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors\"\r\n              onClick={() => setShowMenu(false)}\r\n            >\r\n              üîç T√¨m ki·∫øm\r\n            </Link>\r\n\r\n            <Link\r\n              href=\"/blog/create\"\r\n              className=\"block px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors\"\r\n              onClick={() => setShowMenu(false)}\r\n            >\r\n              ‚ûï T·∫°o b√†i\r\n            </Link>\r\n\r\n            <Link\r\n              href=\"/profile\"\r\n              className=\"block px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors\"\r\n              onClick={() => setShowMenu(false)}\r\n            >\r\n              üë§ Trang c√° nh√¢n\r\n            </Link>\r\n\r\n            <button\r\n              onClick={() => {\r\n                signOut({ redirect: true, callbackUrl: '/login' })\r\n                setShowMenu(false)\r\n              }}\r\n              className=\"block w-full text-left px-4 py-2 text-gray-700 hover:bg-red-50 rounded-lg transition-colors\"\r\n            >\r\n              üö™ ƒêƒÉng xu·∫•t\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,2LAAU;IACpC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gPAAQ,EAAC;IAEzC,qBACE,6QAAC;QAAI,WAAU;kBACb,cAAA,6QAAC;YAAI,WAAU;;8BACb,6QAAC;oBAAI,WAAU;;sCAEb,6QAAC,sMAAI;4BAAC,MAAK;4BAAI,WAAU;sCAAuD;;;;;;sCAKhF,6QAAC;4BAAI,WAAU;;8CACb,6QAAC,sMAAI;oCACH,MAAK;oCACL,WAAU;;sDAEV,6QAAC;4CAAK,WAAU;sDAAU;;;;;;sDAC1B,6QAAC;sDAAK;;;;;;;;;;;;8CAGR,6QAAC,sMAAI;oCACH,MAAK;oCACL,WAAU;;sDAEV,6QAAC;4CAAK,WAAU;sDAAU;;;;;;sDAC1B,6QAAC;sDAAK;;;;;;;;;;;;8CAGR,6QAAC,sMAAI;oCACH,MAAK;oCACL,WAAU;;sDAEV,6QAAC;4CAAK,WAAU;sDAAU;;;;;;sDAC1B,6QAAC;sDAAK;;;;;;;;;;;;8CAGR,6QAAC,sMAAI;oCACH,MAAK;oCACL,WAAU;;sDAEV,6QAAC;4CAAK,WAAU;sDAAU;;;;;;sDAC1B,6QAAC;sDAAK;;;;;;;;;;;;8CAGR,6QAAC;oCACC,SAAS,IAAM,IAAA,wLAAO,EAAC;4CAAE,UAAU;4CAAM,aAAa;wCAAS;oCAC/D,WAAU;;sDAEV,6QAAC;4CAAK,WAAU;sDAAU;;;;;;sDAC1B,6QAAC;sDAAK;;;;;;;;;;;;;;;;;;sCAKV,6QAAC;4BACC,SAAS,IAAM,YAAY,CAAC;4BAC5B,WAAU;sCACX;;;;;;;;;;;;gBAMF,0BACC,6QAAC;oBAAI,WAAU;;sCACb,6QAAC,sMAAI;4BACH,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,YAAY;sCAC5B;;;;;;sCAID,6QAAC,sMAAI;4BACH,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,YAAY;sCAC5B;;;;;;sCAID,6QAAC,sMAAI;4BACH,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,YAAY;sCAC5B;;;;;;sCAID,6QAAC,sMAAI;4BACH,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,YAAY;sCAC5B;;;;;;sCAID,6QAAC;4BACC,SAAS;gCACP,IAAA,wLAAO,EAAC;oCAAE,UAAU;oCAAM,aAAa;gCAAS;gCAChD,YAAY;4BACd;4BACA,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAQb","debugId":null}},
    {"offset": {"line": 287, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Documents/IT4409/Instagram-lite/app/components/LikeButton.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\n\r\ninterface LikeButtonProps {\r\n  blogId: string\r\n  initialLiked?: boolean\r\n  initialCount?: number\r\n  onLikeChange?: (newCount: number) => void\r\n}\r\n\r\nexport default function LikeButton({ \r\n  blogId, \r\n  initialLiked = false, \r\n  initialCount = 0,\r\n  onLikeChange\r\n}: LikeButtonProps) {\r\n  const router = useRouter()\r\n  const [liked, setLiked] = useState(initialLiked)\r\n  const [likeCount, setLikeCount] = useState(initialCount)\r\n  const [loading, setLoading] = useState(false)\r\n  const [authenticated, setAuthenticated] = useState<boolean | null>(null)\r\n\r\n  // g·ªçi API /api/me\r\n  useEffect(() => {\r\n    const checkSession = async () => {\r\n      try {\r\n        const res = await fetch('/api/me', {\r\n          method: 'GET',\r\n          credentials: 'include',\r\n        })\r\n\r\n        if (!res.ok) {\r\n          console.log('Kh√¥ng c√≥ session, chuy·ªÉn h∆∞·ªõng ƒë·∫øn /login')\r\n          setAuthenticated(false)\r\n          return\r\n        }\r\n\r\n        const data = await res.json()\r\n        console.log('User session found:', data)\r\n        setAuthenticated(true)\r\n      } catch (err) {\r\n        console.error('L·ªói ki·ªÉm tra session:', err)\r\n        setAuthenticated(false)\r\n      }\r\n    }\r\n\r\n    checkSession()\r\n  }, [])\r\n\r\n  const handleLike = async () => {\r\n    if (authenticated === null) {\r\n      console.log('ƒêang ki·ªÉm tra session...')\r\n      return\r\n    }\r\n\r\n    if (!authenticated) {\r\n      console.log('Kh√¥ng c√≥ session, chuy·ªÉn h∆∞·ªõng ƒë·∫øn /login')\r\n      router.push('/login')\r\n      return\r\n    }\r\n\r\n    setLoading(true)\r\n\r\n    try {\r\n      console.log('Sending like request for blog:', blogId)\r\n\r\n      const response = await fetch(`/api/blog/${blogId}/like`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        credentials: 'include',\r\n      })\r\n\r\n      console.log('Response status:', response.status)\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.text()\r\n        console.error('Server error:', errorData)\r\n        throw new Error(`HTTP ${response.status}: ${errorData}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      console.log('Like response:', data)\r\n\r\n      setLiked(data.liked)\r\n      const newCount = data.liked ? likeCount + 1 : likeCount - 1\r\n      setLikeCount(newCount)\r\n      \r\n      // G·ªçi callback ƒë·ªÉ update parent component\r\n      if (onLikeChange) {\r\n        onLikeChange(newCount)\r\n      }\r\n    } catch (error) {\r\n      console.error('Like error:', error)\r\n      if (error instanceof Error && error.message.includes('401')) {\r\n        console.log('Session invalid, redirecting to login')\r\n        router.push('/login')\r\n      }\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <button\r\n      onClick={handleLike}\r\n      disabled={loading || authenticated === null}\r\n      className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors flex-1 justify-center ${\r\n        loading || authenticated === null\r\n          ? 'opacity-50 cursor-not-allowed'\r\n          : 'hover:bg-gray-100'\r\n      }`}\r\n    >\r\n      <span className={liked ? 'text-blue-500' : 'text-gray-600'}>\r\n        üëç\r\n      </span>\r\n      <span className={`font-medium ${liked ? 'text-blue-600' : 'text-gray-600'}`}>\r\n        {loading ? 'ƒêang x·ª≠ l√Ω...' : liked ? 'ƒê√£ th√≠ch' : 'Th√≠ch'}\r\n      </span>\r\n    </button>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAYe,SAAS,WAAW,EACjC,MAAM,EACN,eAAe,KAAK,EACpB,eAAe,CAAC,EAChB,YAAY,EACI;IAChB,MAAM,SAAS,IAAA,8KAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gPAAQ,EAAC;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gPAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gPAAQ,EAAC;IACvC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,gPAAQ,EAAiB;IAEnE,kBAAkB;IAClB,IAAA,iPAAS,EAAC;QACR,MAAM,eAAe;YACnB,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,WAAW;oBACjC,QAAQ;oBACR,aAAa;gBACf;gBAEA,IAAI,CAAC,IAAI,EAAE,EAAE;oBACX,QAAQ,GAAG,CAAC;oBACZ,iBAAiB;oBACjB;gBACF;gBAEA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,QAAQ,GAAG,CAAC,uBAAuB;gBACnC,iBAAiB;YACnB,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,yBAAyB;gBACvC,iBAAiB;YACnB;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,aAAa;QACjB,IAAI,kBAAkB,MAAM;YAC1B,QAAQ,GAAG,CAAC;YACZ;QACF;QAEA,IAAI,CAAC,eAAe;YAClB,QAAQ,GAAG,CAAC;YACZ,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,WAAW;QAEX,IAAI;YACF,QAAQ,GAAG,CAAC,kCAAkC;YAE9C,MAAM,WAAW,MAAM,MAAM,CAAC,UAAU,EAAE,OAAO,KAAK,CAAC,EAAE;gBACvD,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,aAAa;YACf;YAEA,QAAQ,GAAG,CAAC,oBAAoB,SAAS,MAAM;YAE/C,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,QAAQ,KAAK,CAAC,iBAAiB;gBAC/B,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE,SAAS,MAAM,CAAC,EAAE,EAAE,WAAW;YACzD;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,QAAQ,GAAG,CAAC,kBAAkB;YAE9B,SAAS,KAAK,KAAK;YACnB,MAAM,WAAW,KAAK,KAAK,GAAG,YAAY,IAAI,YAAY;YAC1D,aAAa;YAEb,0CAA0C;YAC1C,IAAI,cAAc;gBAChB,aAAa;YACf;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,eAAe;YAC7B,IAAI,iBAAiB,SAAS,MAAM,OAAO,CAAC,QAAQ,CAAC,QAAQ;gBAC3D,QAAQ,GAAG,CAAC;gBACZ,OAAO,IAAI,CAAC;YACd;QACF,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6QAAC;QACC,SAAS;QACT,UAAU,WAAW,kBAAkB;QACvC,WAAW,CAAC,yFAAyF,EACnG,WAAW,kBAAkB,OACzB,kCACA,qBACJ;;0BAEF,6QAAC;gBAAK,WAAW,QAAQ,kBAAkB;0BAAiB;;;;;;0BAG5D,6QAAC;gBAAK,WAAW,CAAC,YAAY,EAAE,QAAQ,kBAAkB,iBAAiB;0BACxE,UAAU,kBAAkB,QAAQ,aAAa;;;;;;;;;;;;AAI1D","debugId":null}},
    {"offset": {"line": 488, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Documents/IT4409/Instagram-lite/app/components/CommentSection.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\ninterface Comment {\r\n  id: string;\r\n  content: string;\r\n  createdAt: string;\r\n  parentId: string | null;\r\n  author: {\r\n    fullname: string;\r\n    username: string;\r\n  };\r\n  replies: Comment[];\r\n}\r\n\r\ninterface Props {\r\n  blogId: string;\r\n  currentUser: {\r\n    id: string;\r\n    fullname: string;\r\n    username: string;\r\n  } | null;\r\n  onCommentAdded?: () => void;\r\n  onClose?: () => void;\r\n}\r\n\r\nfunction buildCommentTree(comments: Omit<Comment, 'replies'>[]): Comment[] {\r\n  const map = new Map<string, Comment>();\r\n  const roots: Comment[] = [];\r\n\r\n  comments.forEach((comment) => {\r\n    map.set(comment.id, { ...comment, replies: [] });\r\n  });\r\n\r\n  map.forEach((comment) => {\r\n    if (comment.parentId) {\r\n      const parent = map.get(comment.parentId);\r\n      parent?.replies.push(comment);\r\n    } else {\r\n      roots.push(comment);\r\n    }\r\n  });\r\n\r\n  return roots;\r\n}\r\n\r\nexport default function CommentSection({ blogId, currentUser, onCommentAdded, onClose }: Props) {\r\n  const [comments, setComments] = useState<Comment[]>([]);\r\n  const [newComment, setNewComment] = useState('');\r\n  const [replyTo, setReplyTo] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    axios.get(`/api/blog/${blogId}/comment`, {\r\n      withCredentials: true\r\n    }).then((res) => {\r\n      const tree = buildCommentTree(res.data);\r\n      setComments(tree);\r\n    }).catch((err) => {\r\n      console.error('Error loading comments:', err);\r\n    });\r\n  }, [blogId]);\r\n  \r\n  async function handleSubmit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    if (!newComment.trim()) return;\r\n\r\n    try {\r\n      await axios.post(`/api/blog/${blogId}/comment`, {\r\n        content: newComment,\r\n        parentId: replyTo,\r\n      }, {\r\n        withCredentials: true\r\n      });\r\n\r\n      setNewComment('');\r\n      setReplyTo(null);\r\n\r\n      const res = await axios.get(`/api/blog/${blogId}/comment`, {\r\n        withCredentials: true\r\n      });\r\n      setComments(buildCommentTree(res.data));\r\n      \r\n      // G·ªçi callback ƒë·ªÉ c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng b√¨nh lu·∫≠n\r\n      if (onCommentAdded) {\r\n        onCommentAdded();\r\n      }\r\n    } catch (err) {\r\n      console.error('Error submitting comment:', err);\r\n      alert('Kh√¥ng th·ªÉ g·ª≠i b√¨nh lu·∫≠n. Vui l√≤ng th·ª≠ l·∫°i.');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full\">\r\n      {/* Header */}\r\n      <div className=\"flex justify-between items-center p-4 border-b bg-gray-50\">\r\n        <h2 className=\"text-lg font-semibold\">B√¨nh lu·∫≠n</h2>\r\n        <button\r\n          onClick={onClose}\r\n          className=\"text-red-500 text-xl font-bold hover:text-red-600\"\r\n        >\r\n          ‚úï\r\n        </button>\r\n      </div>\r\n\r\n      {/* Comments List - Scrollable */}\r\n      <div className=\"flex-1 p-4 overflow-y-auto\">\r\n        <div className=\"space-y-3\">\r\n          {comments.map((comment) => (\r\n            <CommentItem\r\n              key={comment.id}\r\n              comment={comment}\r\n              currentUser={currentUser}\r\n              onReply={setReplyTo}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Comment Form - Fixed at Bottom */}\r\n      {currentUser && (\r\n        <div className=\"border-t bg-white p-4\">\r\n          <form onSubmit={handleSubmit}>\r\n            {replyTo && (\r\n              <div className=\"text-sm text-blue-500 mb-2\">\r\n                Tr·∫£ l·ªùi m·ªôt b√¨nh lu·∫≠n.{' '}\r\n                <button\r\n                  onClick={() => setReplyTo(null)}\r\n                  type=\"button\"\r\n                  className=\"text-red-500 underline ml-2\"\r\n                >\r\n                  Hu·ª∑\r\n                </button>\r\n              </div>\r\n            )}\r\n            <textarea\r\n              value={newComment}\r\n              onChange={(e) => setNewComment(e.target.value)}\r\n              rows={2}\r\n              placeholder=\"Vi·∫øt b√¨nh lu·∫≠n...\"\r\n              className=\"w-full border rounded p-2 focus:outline-none focus:ring focus:ring-blue-300\"\r\n            />\r\n            <button\r\n              type=\"submit\"\r\n              className=\"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n            >\r\n              G·ª≠i\r\n            </button>\r\n          </form>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface CommentItemProps {\r\n  comment: Comment;\r\n  currentUser: Props['currentUser'];\r\n  onReply: (id: string) => void;\r\n}\r\n\r\nfunction CommentItem({ comment, currentUser, onReply }: CommentItemProps) {\r\n  return (\r\n    <div className=\"ml-2 mt-2\">\r\n      <div className=\"p-2 bg-gray-100 rounded-lg border border-gray-200\">\r\n        <p className=\"text-sm font-medium text-gray-800\">\r\n          {comment.author.fullname}{' '}\r\n          <span className=\"text-gray-500 text-xs\">\r\n            {new Date(comment.createdAt).toLocaleString()}\r\n          </span>\r\n        </p>\r\n        <p className=\"text-sm text-gray-700\">{comment.content}</p>\r\n        {currentUser && (\r\n          <button\r\n            onClick={() => onReply(comment.id)}\r\n            className=\"text-xs text-blue-500 hover:underline mt-1\"\r\n          >\r\n            Tr·∫£ l·ªùi\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Replies */}\r\n      {comment.replies.length > 0 && (\r\n        <div className=\"ml-4 border-l pl-2 mt-2\">\r\n          {comment.replies.map((reply) => (\r\n            <CommentItem\r\n              key={reply.id}\r\n              comment={reply}\r\n              currentUser={currentUser}\r\n              onReply={onReply}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 751, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Documents/IT4409/Instagram-lite/app/components/CommentToggle.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport CommentSection from './CommentSection';\r\n\r\ntype Props = {\r\n  blogId: string;\r\n  currentUser: {\r\n    id: string;\r\n    fullname: string;\r\n    username: string;\r\n  } | null;\r\n  onCommentAdded?: () => void;\r\n  onClose?: () => void;\r\n  isOpen?: boolean;\r\n};\r\n\r\nexport default function CommentToggle({ blogId, currentUser, onCommentAdded, onClose, isOpen }: Props) {\r\n  const [internalOpen, setInternalOpen] = useState(false);\r\n  const showComments = isOpen !== undefined ? isOpen : internalOpen;\r\n\r\n  useEffect(() => {\r\n    if (showComments) {\r\n      document.body.style.overflow = 'hidden';\r\n    } else {\r\n      document.body.style.overflow = 'unset';\r\n    }\r\n    return () => {\r\n      document.body.style.overflow = 'unset';\r\n    };\r\n  }, [showComments]);\r\n\r\n  const handleToggle = () => {\r\n    if (isOpen !== undefined && onClose) {\r\n      onClose();\r\n    } else {\r\n      setInternalOpen(!internalOpen);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        onClick={handleToggle}\r\n        className=\"flex items-center space-x-2 px-4 py-2 hover:bg-gray-50 rounded-lg flex-1 justify-center transition-colors w-full\"\r\n      >\r\n        <span className=\"text-gray-600\">üí¨</span>\r\n        <span className=\"text-gray-600 font-medium\">B√¨nh lu·∫≠n</span>\r\n      </button>\r\n\r\n      {showComments && (\r\n        <>\r\n          {/* Backdrop */}\r\n          <div \r\n            className=\"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4\"\r\n            onClick={handleToggle}\r\n          >\r\n            {/* Modal */}\r\n            <div \r\n              className=\"bg-white rounded-lg shadow-2xl w-full max-w-2xl h-[80vh] flex flex-col overflow-hidden\"\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <CommentSection \r\n                blogId={blogId} \r\n                currentUser={currentUser}\r\n                onCommentAdded={onCommentAdded}\r\n                onClose={handleToggle}\r\n              />\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAiBe,SAAS,cAAc,EAAE,MAAM,EAAE,WAAW,EAAE,cAAc,EAAE,OAAO,EAAE,MAAM,EAAS;IACnG,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gPAAQ,EAAC;IACjD,MAAM,eAAe,WAAW,YAAY,SAAS;IAErD,IAAA,iPAAS,EAAC;QACR,IAAI,cAAc;YAChB,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACjC,OAAO;YACL,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACjC;QACA,OAAO;YACL,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACjC;IACF,GAAG;QAAC;KAAa;IAEjB,MAAM,eAAe;QACnB,IAAI,WAAW,aAAa,SAAS;YACnC;QACF,OAAO;YACL,gBAAgB,CAAC;QACnB;IACF;IAEA,qBACE;;0BACE,6QAAC;gBACC,SAAS;gBACT,WAAU;;kCAEV,6QAAC;wBAAK,WAAU;kCAAgB;;;;;;kCAChC,6QAAC;wBAAK,WAAU;kCAA4B;;;;;;;;;;;;YAG7C,8BACC;0BAEE,cAAA,6QAAC;oBACC,WAAU;oBACV,SAAS;8BAGT,cAAA,6QAAC;wBACC,WAAU;wBACV,SAAS,CAAC,IAAM,EAAE,eAAe;kCAEjC,cAAA,6QAAC,8KAAc;4BACb,QAAQ;4BACR,aAAa;4BACb,gBAAgB;4BAChB,SAAS;;;;;;;;;;;;;;;;;;;AAQzB","debugId":null}},
    {"offset": {"line": 847, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Documents/IT4409/Instagram-lite/app/components/ShareButton.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\n\r\ninterface ShareButtonProps {\r\n  blogId: string\r\n  onShared?: () => void\r\n}\r\n\r\nexport default function ShareButton({ blogId, onShared }: ShareButtonProps) {\r\n  const [open, setOpen] = useState(false)\r\n  const [caption, setCaption] = useState('')\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const handleShare = async () => {\r\n    setLoading(true)\r\n\r\n    try {\r\n      await fetch('/api/blog/share', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ blogId, caption }),\r\n      })\r\n\r\n      onShared?.() // g·ªçi callback ƒë·ªÉ refresh d·ªØ li·ªáu\r\n      setOpen(false)\r\n      setCaption('')\r\n    } catch (error) {\r\n      console.error('Error sharing blog:', error)\r\n      alert('Chia s·∫ª b√†i vi·∫øt th·∫•t b·∫°i.')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        onClick={() => setOpen(true)}\r\n        className=\"flex items-center space-x-2 px-4 py-2 hover:bg-gray-100 rounded-lg flex-1 justify-center\"\r\n      >\r\n        <span>üì§</span>\r\n        <span className=\"font-medium\">Chia s·∫ª</span>\r\n      </button>\r\n\r\n      {open && (\r\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-4 w-full max-w-md\">\r\n            <h3 className=\"font-semibold mb-2\">Chia s·∫ª b√†i vi·∫øt</h3>\r\n            <textarea\r\n              value={caption}\r\n              onChange={(e) => setCaption(e.target.value)}\r\n              placeholder=\"Vi·∫øt c·∫£m nghƒ© c·ªßa b·∫°n...\"\r\n              className=\"w-full border rounded p-2 mb-3\"\r\n              rows={3}\r\n            />\r\n            <div className=\"flex justify-end space-x-2\">\r\n              <button onClick={() => setOpen(false)}>H·ªßy</button>\r\n              <button\r\n                onClick={handleShare}\r\n                disabled={loading}\r\n                className=\"bg-blue-600 text-white px-4 py-1 rounded\"\r\n              >\r\n                {loading ? 'ƒêang chia s·∫ª...' : 'Chia s·∫ª'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASe,SAAS,YAAY,EAAE,MAAM,EAAE,QAAQ,EAAoB;IACxE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,gPAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gPAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gPAAQ,EAAC;IAEvC,MAAM,cAAc;QAClB,WAAW;QAEX,IAAI;YACF,MAAM,MAAM,mBAAmB;gBAC7B,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAQ;gBAAQ;YACzC;YAEA,cAAa,kCAAkC;YAC/C,QAAQ;YACR,WAAW;QACb,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,uBAAuB;YACrC,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE;;0BACE,6QAAC;gBACC,SAAS,IAAM,QAAQ;gBACvB,WAAU;;kCAEV,6QAAC;kCAAK;;;;;;kCACN,6QAAC;wBAAK,WAAU;kCAAc;;;;;;;;;;;;YAG/B,sBACC,6QAAC;gBAAI,WAAU;0BACb,cAAA,6QAAC;oBAAI,WAAU;;sCACb,6QAAC;4BAAG,WAAU;sCAAqB;;;;;;sCACnC,6QAAC;4BACC,OAAO;4BACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;4BAC1C,aAAY;4BACZ,WAAU;4BACV,MAAM;;;;;;sCAER,6QAAC;4BAAI,WAAU;;8CACb,6QAAC;oCAAO,SAAS,IAAM,QAAQ;8CAAQ;;;;;;8CACvC,6QAAC;oCACC,SAAS;oCACT,UAAU;oCACV,WAAU;8CAET,UAAU,oBAAoB;;;;;;;;;;;;;;;;;;;;;;;;;AAQ/C","debugId":null}},
    {"offset": {"line": 979, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Documents/IT4409/Instagram-lite/app/components/BlogActions.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport LikeButton from './LikeButton'\r\nimport CommentToggle from './CommentToggle'\r\nimport ShareButton from './ShareButton'\r\n\r\ninterface BlogActionsProps {\r\n  blogId: string\r\n  displayBlogId: string\r\n  initialLikeCount: number\r\n  initialCommentCount: number\r\n  initialLiked: boolean\r\n  currentUser: {\r\n    id: string\r\n    fullname: string\r\n    username: string\r\n  } | null\r\n}\r\n\r\nexport default function BlogActions({\r\n  blogId,\r\n  displayBlogId,\r\n  initialLikeCount,\r\n  initialCommentCount,\r\n  initialLiked,\r\n  currentUser\r\n}: BlogActionsProps) {\r\n  const [likeCount, setLikeCount] = useState(initialLikeCount)\r\n  const [commentCount, setCommentCount] = useState(initialCommentCount)\r\n\r\n  return (\r\n    <div className=\"px-4 pb-4\">\r\n      <div className=\"flex justify-between text-sm text-gray-500 mb-2\">\r\n        <span>{likeCount} l∆∞·ª£t th√≠ch</span>\r\n        <span>{commentCount} b√¨nh lu·∫≠n</span>\r\n      </div>\r\n\r\n      <div className=\"flex space-x-4 border-t pt-2\">\r\n        <LikeButton\r\n          blogId={blogId}\r\n          initialLiked={initialLiked}\r\n          initialCount={initialLikeCount}\r\n          onLikeChange={(newCount) => setLikeCount(newCount)}\r\n        />\r\n\r\n        <CommentToggle\r\n          blogId={blogId}\r\n          currentUser={currentUser}\r\n          onCommentAdded={() => setCommentCount(prev => prev + 1)}\r\n        />\r\n\r\n        <ShareButton\r\n          blogId={displayBlogId}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAoBe,SAAS,YAAY,EAClC,MAAM,EACN,aAAa,EACb,gBAAgB,EAChB,mBAAmB,EACnB,YAAY,EACZ,WAAW,EACM;IACjB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gPAAQ,EAAC;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gPAAQ,EAAC;IAEjD,qBACE,6QAAC;QAAI,WAAU;;0BACb,6QAAC;gBAAI,WAAU;;kCACb,6QAAC;;4BAAM;4BAAU;;;;;;;kCACjB,6QAAC;;4BAAM;4BAAa;;;;;;;;;;;;;0BAGtB,6QAAC;gBAAI,WAAU;;kCACb,6QAAC,0KAAU;wBACT,QAAQ;wBACR,cAAc;wBACd,cAAc;wBACd,cAAc,CAAC,WAAa,aAAa;;;;;;kCAG3C,6QAAC,6KAAa;wBACZ,QAAQ;wBACR,aAAa;wBACb,gBAAgB,IAAM,gBAAgB,CAAA,OAAQ,OAAO;;;;;;kCAGvD,6QAAC,2KAAW;wBACV,QAAQ;;;;;;;;;;;;;;;;;;AAKlB","debugId":null}},
    {"offset": {"line": 1075, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Documents/IT4409/Instagram-lite/app/components/FollowButton.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\n\r\ninterface FollowButtonProps {\r\n  targetUserId: string\r\n  initialIsFollowing: boolean\r\n  onFollowChange?: (isFollowing: boolean, followersCount: number) => void\r\n}\r\n\r\nexport default function FollowButton({ \r\n  targetUserId, \r\n  initialIsFollowing,\r\n  onFollowChange \r\n}: FollowButtonProps) {\r\n  const [isFollowing, setIsFollowing] = useState(initialIsFollowing)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n\r\n  const handleFollow = async () => {\r\n    setIsLoading(true)\r\n    try {\r\n      const response = await fetch(`/api/follow/${targetUserId}`, {\r\n        method: isFollowing ? 'DELETE' : 'POST',\r\n        credentials: 'include',\r\n      })\r\n\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setIsFollowing(!isFollowing)\r\n        onFollowChange?.(!isFollowing, data.followersCount)\r\n      } else {\r\n        alert('C√≥ l·ªói x·∫£y ra')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error)\r\n      alert('C√≥ l·ªói x·∫£y ra')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <button\r\n      onClick={handleFollow}\r\n      disabled={isLoading}\r\n      className={`px-6 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 ${\r\n        isFollowing\r\n          ? 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n          : 'bg-blue-600 text-white hover:bg-blue-700'\r\n      }`}\r\n    >\r\n      {isLoading ? '...' : isFollowing ? '‚úì ƒêang theo d√µi' : '+ Theo d√µi'}\r\n    </button>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUe,SAAS,aAAa,EACnC,YAAY,EACZ,kBAAkB,EAClB,cAAc,EACI;IAClB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,gPAAQ,EAAC;IAC/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gPAAQ,EAAC;IAE3C,MAAM,eAAe;QACnB,aAAa;QACb,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,CAAC,YAAY,EAAE,cAAc,EAAE;gBAC1D,QAAQ,cAAc,WAAW;gBACjC,aAAa;YACf;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,eAAe,CAAC;gBAChB,iBAAiB,CAAC,aAAa,KAAK,cAAc;YACpD,OAAO;gBACL,MAAM;YACR;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,UAAU;YACxB,MAAM;QACR,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,6QAAC;QACC,SAAS;QACT,UAAU;QACV,WAAW,CAAC,uEAAuE,EACjF,cACI,gDACA,4CACJ;kBAED,YAAY,QAAQ,cAAc,oBAAoB;;;;;;AAG7D","debugId":null}},
    {"offset": {"line": 1123, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Documents/IT4409/Instagram-lite/app/components/BlogImages.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Image from 'next/image'\r\nimport { useState } from 'react'\r\n\r\ninterface BlogImagesProps {\r\n  imageUrls: string[] // ·∫£nh + video URLs\r\n}\r\n\r\nexport default function BlogImages({ imageUrls }: BlogImagesProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [currentIndex, setCurrentIndex] = useState(0)\r\n\r\n  if (!imageUrls || imageUrls.length === 0) return null\r\n\r\n  const openLightbox = (index: number) => {\r\n    setCurrentIndex(index)\r\n    setIsOpen(true)\r\n  }\r\n\r\n  const nextIndex = () => (currentIndex + 1) % imageUrls.length\r\n  const prevIndex = () =>\r\n    (currentIndex - 1 + imageUrls.length) % imageUrls.length\r\n\r\n  const displayUrls = imageUrls.slice(0, 4)\r\n\r\n  const isVideo = (url: string) =>\r\n    url.endsWith('.mp4') || url.endsWith('.mov') || url.endsWith('.webm')\r\n\r\n  const renderMedia = (url: string, idx: number) => {\r\n    return (\r\n      <div\r\n        key={idx}\r\n        className=\"relative w-full h-full cursor-pointer\"\r\n        onClick={() => openLightbox(idx)}\r\n      >\r\n        {isVideo(url) ? (\r\n          <div className=\"w-full h-full relative\">\r\n            <Image\r\n              src={url}\r\n              alt={`video ${idx}`}\r\n              fill\r\n              className=\"object-cover\"\r\n            />\r\n            <div className=\"absolute inset-0 flex items-center justify-center text-white text-4xl\">\r\n              ‚ñ∂\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <Image src={url} alt={`image ${idx}`} fill className=\"object-cover\" />\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full aspect-square rounded-lg overflow-hidden\">\r\n      {/* Grid */}\r\n      {displayUrls.length === 1 && (\r\n        <div className=\"w-full h-full\">{renderMedia(displayUrls[0], 0)}</div>\r\n      )}\r\n\r\n      {displayUrls.length === 2 && (\r\n        <div className=\"grid grid-cols-2 gap-1 w-full h-full\">\r\n          {displayUrls.map(renderMedia)}\r\n        </div>\r\n      )}\r\n\r\n      {displayUrls.length === 3 && (\r\n        <div className=\"grid grid-rows-2 gap-1 w-full h-full\">\r\n          <div className=\"row-span-1\">{renderMedia(displayUrls[0], 0)}</div>\r\n          <div className=\"grid grid-cols-2 gap-1 row-span-1\">\r\n            {displayUrls.slice(1).map(renderMedia)}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {displayUrls.length >= 4 && (\r\n        <div className=\"grid grid-cols-2 grid-rows-2 gap-1 w-full h-full\">\r\n          {displayUrls.map((url, idx) => (\r\n            <div key={idx} className=\"relative w-full h-full\">\r\n              {renderMedia(url, idx)}\r\n              {idx === 3 && imageUrls.length > 4 && (\r\n                <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center text-white text-2xl font-bold\">\r\n                  +{imageUrls.length - 4}\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Lightbox */}\r\n      {isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/80\"\r\n          onClick={() => setIsOpen(false)}\r\n        >\r\n          <button\r\n            className=\"absolute left-4 text-white text-3xl\"\r\n            onClick={(e) => {\r\n              e.stopPropagation()\r\n              setCurrentIndex(prevIndex())\r\n            }}\r\n          >\r\n            ‚Äπ\r\n          </button>\r\n\r\n          <div className=\"relative w-4/5 max-w-3xl h-[80%]\">\r\n            {isVideo(imageUrls[currentIndex]) ? (\r\n              <video\r\n                src={imageUrls[currentIndex]}\r\n                className=\"w-full h-full object-contain\"\r\n                controls\r\n                autoPlay\r\n              />\r\n            ) : (\r\n              <Image\r\n                src={imageUrls[currentIndex]}\r\n                alt={`lightbox image ${currentIndex}`}\r\n                fill\r\n                className=\"object-contain\"\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          <button\r\n            className=\"absolute right-4 text-white text-3xl\"\r\n            onClick={(e) => {\r\n              e.stopPropagation()\r\n              setCurrentIndex(nextIndex())\r\n            }}\r\n          >\r\n            ‚Ä∫\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AASe,SAAS,WAAW,EAAE,SAAS,EAAmB;IAC/D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,gPAAQ,EAAC;IACrC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gPAAQ,EAAC;IAEjD,IAAI,CAAC,aAAa,UAAU,MAAM,KAAK,GAAG,OAAO;IAEjD,MAAM,eAAe,CAAC;QACpB,gBAAgB;QAChB,UAAU;IACZ;IAEA,MAAM,YAAY,IAAM,CAAC,eAAe,CAAC,IAAI,UAAU,MAAM;IAC7D,MAAM,YAAY,IAChB,CAAC,eAAe,IAAI,UAAU,MAAM,IAAI,UAAU,MAAM;IAE1D,MAAM,cAAc,UAAU,KAAK,CAAC,GAAG;IAEvC,MAAM,UAAU,CAAC,MACf,IAAI,QAAQ,CAAC,WAAW,IAAI,QAAQ,CAAC,WAAW,IAAI,QAAQ,CAAC;IAE/D,MAAM,cAAc,CAAC,KAAa;QAChC,qBACE,6QAAC;YAEC,WAAU;YACV,SAAS,IAAM,aAAa;sBAE3B,QAAQ,qBACP,6QAAC;gBAAI,WAAU;;kCACb,6QAAC,uKAAK;wBACJ,KAAK;wBACL,KAAK,CAAC,MAAM,EAAE,KAAK;wBACnB,IAAI;wBACJ,WAAU;;;;;;kCAEZ,6QAAC;wBAAI,WAAU;kCAAwE;;;;;;;;;;;qCAKzF,6QAAC,uKAAK;gBAAC,KAAK;gBAAK,KAAK,CAAC,MAAM,EAAE,KAAK;gBAAE,IAAI;gBAAC,WAAU;;;;;;WAjBlD;;;;;IAqBX;IAEA,qBACE,6QAAC;QAAI,WAAU;;YAEZ,YAAY,MAAM,KAAK,mBACtB,6QAAC;gBAAI,WAAU;0BAAiB,YAAY,WAAW,CAAC,EAAE,EAAE;;;;;;YAG7D,YAAY,MAAM,KAAK,mBACtB,6QAAC;gBAAI,WAAU;0BACZ,YAAY,GAAG,CAAC;;;;;;YAIpB,YAAY,MAAM,KAAK,mBACtB,6QAAC;gBAAI,WAAU;;kCACb,6QAAC;wBAAI,WAAU;kCAAc,YAAY,WAAW,CAAC,EAAE,EAAE;;;;;;kCACzD,6QAAC;wBAAI,WAAU;kCACZ,YAAY,KAAK,CAAC,GAAG,GAAG,CAAC;;;;;;;;;;;;YAK/B,YAAY,MAAM,IAAI,mBACrB,6QAAC;gBAAI,WAAU;0BACZ,YAAY,GAAG,CAAC,CAAC,KAAK,oBACrB,6QAAC;wBAAc,WAAU;;4BACtB,YAAY,KAAK;4BACjB,QAAQ,KAAK,UAAU,MAAM,GAAG,mBAC/B,6QAAC;gCAAI,WAAU;;oCAA8F;oCACzG,UAAU,MAAM,GAAG;;;;;;;;uBAJjB;;;;;;;;;;YAaf,wBACC,6QAAC;gBACC,WAAU;gBACV,SAAS,IAAM,UAAU;;kCAEzB,6QAAC;wBACC,WAAU;wBACV,SAAS,CAAC;4BACR,EAAE,eAAe;4BACjB,gBAAgB;wBAClB;kCACD;;;;;;kCAID,6QAAC;wBAAI,WAAU;kCACZ,QAAQ,SAAS,CAAC,aAAa,kBAC9B,6QAAC;4BACC,KAAK,SAAS,CAAC,aAAa;4BAC5B,WAAU;4BACV,QAAQ;4BACR,QAAQ;;;;;iDAGV,6QAAC,uKAAK;4BACJ,KAAK,SAAS,CAAC,aAAa;4BAC5B,KAAK,CAAC,eAAe,EAAE,cAAc;4BACrC,IAAI;4BACJ,WAAU;;;;;;;;;;;kCAKhB,6QAAC;wBACC,WAAU;wBACV,SAAS,CAAC;4BACR,EAAE,eAAe;4BACjB,gBAAgB;wBAClB;kCACD;;;;;;;;;;;;;;;;;;AAOX","debugId":null}}]
}